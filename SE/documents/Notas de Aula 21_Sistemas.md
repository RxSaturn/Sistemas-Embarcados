{
  "version": "2",
  "formats": {
    "markdown": {
      "content": "## Page 1\n\n&lt;img&gt;Logo with red circle and green squares&lt;/img&gt;\nINSTITUTO FEDERAL\nDE EDUCAÇÃO, CIÊNCIA E TECNOLOGIA\nMinas Gerais\nCampus Bambuí\n\nDisciplina: BiSuEEA.512 – Sistemas Embarcados\n2º semestre – 2025\nNotas de Aula 21\n\nInstrutor: Williams L. Nicomedes\nLaboratório de Automação e Controle – Núcleo 2 de Laboratórios, Sala 02\n\nwilliams.nicomedes@ifmg.edu.br\n\n22/01/2026\n\n---\n\n\n## Page 2\n\nProjeto de circuitos sequenciais através da linguagem VHDL:\n\n[1]. Flip-flops;\n\n[2]. Contadores;\n\n[3]. Encapsulamento.\n\n&lt;page_number&gt;2&lt;/page_number&gt;\n\n---\n\n\n## Page 3\n\n# FF tipo JK: Elemento de memória\n\n## Circuito combinacional: Saída depende das entradas:\n\nMudança nas entradas → Atualização (\"instantânea\") da saída.\n\n## Circuito sequencial: Saída depende das entradas e do clock.\n\nMudança nas entradas → Atualização da saída ocorre apenas na transição do clock:\n\n*clock*: Onda quadrada, periódica (geralmente).\n\nBorda de subida (↑) ou de descida (↓).\n\nEstados da saída ao longo do tempo: 0, 1, 2, 3, ...\n\nA saída permanece no estado durante um ciclo do *clock* (independentemente das entradas).\n\n---\n\n\n## Page 4\n\n# FF tipo JK: Elemento de memória\n\nFlip-flop tipo JK – Tabela de transição. Estado atual: Q(n).\n\n<table>\n  <thead>\n    <tr>\n      <th>J</th>\n      <th>K</th>\n      <th>Q(n + 1)</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>0</td>\n      <td>Q(n)</td>\n    </tr>\n    <tr>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>1</td>\n      <td>$\\overline{Q(n)}$</td>\n    </tr>\n  </tbody>\n</table>\n\n&lt;img&gt;A circuit diagram showing a clock signal (CLK) connected to a flip-flop. The flip-flop has two inputs labeled J and K, and two outputs labeled Q and $\\overline{Q}$. The J input is connected to one side of the clock, and the K input is connected to the other side.&lt;/img&gt;\n\n&lt;page_number&gt;4&lt;/page_number&gt;\n\n---\n\n\n## Page 5\n\n# FF tipo JK: Elemento de memória\n\n&lt;img&gt;A circuit diagram showing a JK flip-flop with inputs J, K, and CLK, and outputs Q and Q̄.&lt;/img&gt;\n\n<table>\n  <thead>\n    <tr>\n      <th>J</th>\n      <th>K</th>\n      <th>Q(n + 1)</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>0</td>\n      <td>Q(n)</td>\n    </tr>\n    <tr>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>1</td>\n      <td>Q̄(n)</td>\n    </tr>\n  </tbody>\n</table>\n\n&lt;img&gt;A timing diagram illustrating the behavior of a JK flip-flop over time. The diagram shows four columns labeled J, K, CLK, and Q, each with multiple horizontal lines representing different states (0 or 1) at various points in time. The Q column is highlighted in pink to show its state changes. A horizontal arrow labeled \"Tempo\" indicates the passage of time from left to right.&lt;/img&gt;\n\n&lt;page_number&gt;5&lt;/page_number&gt;\n\n---\n\n\n## Page 6\n\n# FF tipo JK - Bloco lógico: Código VHDL\n\nEx.: Salvar como Codigo_01.vhd\n\n```vhdl\nlibrary ieee;\nuse ieee.std_logic_1164.all;\n\n--FF tipo JK.\nentity BlocoFF_JK is\n    port (J, K, clk : in std_logic;\n        Q : out std_logic);\nend BlocoFF_JK;\n\n--Lógica do bloco.\narchitecture funcionamento of BlocoFF_JK is\n\n--Saída: Variável auxiliar.\nsignal Qstate : std_logic := '0';\n\nbegin\n\n    process (J, K, clk)\n    begin\n        --Transição clock: Borda de descida.\n        --clk: tipo 'std_logic'.\n        if falling_edge(clk) then\n            --Não se pode tomar a saída Q, e atribuí-la\n            --(invertida) a ela mesma.\n            if J = '1' and K = '1' then Qstate <= NOT(Qstate);\n            elsif J = '1' and K = '0' then Qstate <= '1';\n```\n&lt;page_number&gt;6&lt;/page_number&gt;\n\n---\n\n\n## Page 7\n\n# FF tipo JK - Bloco lógico: Código VHDL\n\nEx.: Salvar como Codigo_01.vhd\n\n```vhdl\n32 elsif J = '1' and K = '0' then Qstate <= '1';\n33 elsif J = '0' and K = '1' then QState <= '0';\n34 end if;\n35 end if;\n36\n37 end process;\n38\n39 --Saída recebe Qstate, após o processamento.\n40 Q <= Qstate;\n41\n42 end funcionamento;\n43\n44\n45\n46\n47\n```\n\n&lt;page_number&gt;7&lt;/page_number&gt;\n\n---\n\n\n## Page 8\n\n# FF tipo JK - Bloco lógico: Código VHDL\n\nNão é necessário incluir o caso J = 0 e K = 0.\n\nQstate só será alterado caso alguma condição seja verdadeira.\n\nQuando J = 0 e K = 0, nenhuma condição é verdadeira. Logo, Qstate permanece inalterado.\n\nA saída Q não pode ser invertida e atribuída a ela mesma:\n\nVariável auxiliar Qstate.\n\n---\n\n\n## Page 9\n\n# FF tipo JK - Bloco lógico: Código VHDL\n\n*   Geração do bloco;\n*   Inserção no esquemático (Nome: Esquematico_01.bdf);\n*   Inclusão das entrada e saídas;\n*   Set as Top-Level Entity;\n*   Compilação.\n\n&lt;img&gt;A schematic diagram showing inputs J, K, and CLOCK connected to a block labeled \"BlocoFF_JK\". Inside this block, there's an instance of a component with pins J, K, clk, and Q. The output pin Q is connected to another block.&lt;/img&gt;\n\n&lt;page_number&gt;9&lt;/page_number&gt;\n\n---\n\n\n## Page 10\n\n# FF tipo JK\n\nFormas de onda: Especificação dos sinais de entrada:\n\nArquivos *University Program VWF*;\n\nVerificação do funcionamento do circuito.\n\nSalvar como Waveform_01.vwf.\n\n&lt;img&gt;Waveform diagram showing CLOCK, J, K, and Q signals with values B0 and B1 over time.&lt;/img&gt;\n\n&lt;page_number&gt;10&lt;/page_number&gt;\n\n---\n\n\n## Page 11\n\nContador MOD 8 / Divisor de frequências\n\n&lt;img&gt;Circuit diagram showing three JK flip-flops (FF0, FF1, FF2) connected in series with clock inputs (CLK) and power supply (Vcc). Each flip-flop has J and K inputs, and outputs QOUT0, QOUT1, and QOUT2 respectively.&lt;/img&gt;\n\n&lt;img&gt;Timing diagram illustrating the operation of the counter. It shows:\n- A horizontal line labeled \"Clock pulses\" with a series of pink rectangular pulses.\n- A vertical line labeled \"T_CLK\" indicating the duration of each clock pulse.\n- Three vertical lines labeled \"Q0\", \"Q1\", and \"Q2\" displaying the state of the flip-flops over time.\n- Dashed vertical lines marking the transitions between states.\n- A horizontal line labeled \"T_Q1\" indicating the duration of the first flip-flop's output change.\n- A horizontal line labeled \"T_Q2\" indicating the duration of the second flip-flop's output change.\n- A horizontal line labeled \"T_Q3\" indicating the duration of the third flip-flop's output change.\n- A horizontal line labeled \"Count Q2Q1Q0>\" at the bottom, showing the binary state of the flip-flops over time, starting with 000 and progressing through 001, 010, 011, 100, 101, 110, 111, 000, 001, 010, 100, etc.&lt;/img&gt;\n&lt;page_number&gt;11&lt;/page_number&gt;\n\n---\n\n\n## Page 12\n\nContador MOD 8: Blocos\n\nIdea: Interconectar três blocos lógicos correspondentes ao FF tipo JK (BlocoFF_JK) implementado em VHDL:\n\nTrês instâncias (inst, inst1, inst2).\n\n&lt;img&gt;VHDL Circuit Diagram showing three instances of BlocoFF_JK connected to form a counter.&lt;/img&gt;\n\n&lt;page_number&gt;12&lt;/page_number&gt;\n\n---\n\n\n## Page 13\n\n# Contador MOD 8: Blocos\n\nArquivo Esquematico_01.bdf: Teste do bloco simples (pg. 09);\n\nInterconexão dos três blocos (pg. 12): **Novo arquivo esquemático** (Esquematico_02.bdf);\n\nEspecificar Esquematico_02.bdf como a entidade de máximo nível: Painel *Project Navigator* (lado esquerdo da tela), clicar com o botão direito sobre o nome do arquivo e escolher *Set as Top-Level Entity*, antes de proceder à compilação.\n\n&lt;img&gt;Screenshot of Project Navigator window with files listed on the left. The file \"Esquematico_2.bdf\" is highlighted, and a context menu is open showing options like \"Open\", \"Remove File from Project\", \"Set as Top-Level Entity Ctrl+Shift+J\", and \"Properties...\".&lt;/img&gt;\n\n&lt;page_number&gt;13&lt;/page_number&gt;\n\n---\n\n\n## Page 14\n\nContador MOD 8: Blocos - Formas de onda\n\nEntrada VCC = 1. (Salvar como Waveform_02.vwf)\n\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Value at<br>0 ps</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>in<br>Vcc</td>\n<td>B 1</td>\n</tr>\n<tr>\n<td>in<br>CLOCK</td>\n<td>B 0</td>\n</tr>\n<tr>\n<td>out<br>Q0</td>\n<td>B 0</td>\n</tr>\n<tr>\n<td>out<br>Q1</td>\n<td>B 0</td>\n</tr>\n<tr>\n<td>out<br>Q2</td>\n<td>B 0</td>\n</tr>\n</tbody>\n</table>\n\n&lt;img&gt;Waveform diagram showing Vcc, CLOCK, Q0, Q1, and Q2 signals over time.&lt;/img&gt;\n\n&lt;img&gt;Timing diagram illustrating clock pulses, Q0, Q1, Q2, and count states.&lt;/img&gt;\n\n&lt;page_number&gt;14&lt;/page_number&gt;\n\n---\n\n\n## Page 15\n\n# Contador MOD 8: Blocos - Formas de onda\n\n**Obs.:** Dentro do mesmo projeto:\n\n*   Waveform_01.vwf associado a Esquematico_01.bdf;\n*   Waveform_02.vwf associado a Esquematico_02.bdf;\n\nEscolher o esquemático (1 ou 2);\n\n*   Set as Top-Level Entity;\n\n*   Selecionar a waveform correspondente;\n\n*   (Não precisa compilar de novo).\n\n&lt;page_number&gt;15&lt;/page_number&gt;\n\n---\n\n\n## Page 16\n\n# Contador MOD 8: Encapsulamento\n\n**Ideia:** Produzir um único bloco correspondente ao contador (ao invés de usar três blocos como na pag. 12).\n\n**Código anterior com a descrição do bloco FF tipo JK (Codigo_01.vhd), pag. 06:**\n\nIncluso no projeto;\n\n**Escrever novo código VHDL referente ao contador 'encapsulado' (Codigo_02.vhd)**\n\nEntrada única (*clock*);\n\nSaída única (contador).\n\n&lt;page_number&gt;16&lt;/page_number&gt;\n\n---\n\n\n## Page 17\n\n# Contador MOD 8: Encapsulamento\n\nNovo código VHDL (Código_02.vhd) referente ao contador 'encapsulado' (BlocoContador):\n\n```vhdl\nlibrary ieee;\nuse ieee.std_logic_1164.all;\n\n-- Contador MOD 8\nentity BlocoContador is\n    port(clk_in : in std_logic;\n         Q_out : out std_logic_vector(2 downto 0));\nend BlocoContador;\n\n-- Logica do bloco\n```\n\nEntrada única (clk_in): Sinal de clock;\n\nSaída única (Q_out) – tipo std_logic_vector\n\n0 to 2: Q₀Q₁Q₂\n\n2 downto 0: Q₂Q₁Q₀\n\n&lt;page_number&gt;17&lt;/page_number&gt;\n\n---\n\n\n## Page 18\n\n# Contador MOD 8: Encapsulamento\n\nNovo código VHDL (Código_02.vhd) referente ao contador ‘encapsulado’ (BlocoContador):\n\n```vhdl\n--Logica do bloco\narchitecture Funcionamento2 of BlocoContador is\n\nsignal Vcc : std_logic := '1';\nsignal Q_out_aux : std_logic_vector(2 downto 0);\n\ncomponent BlocoFF_JK\n    port(J,K,clk : in std_logic;\n        Q : out std_logic);\nend component;\n\nbegin\n\n    FF0 : BlocoFF_JK port map (J => Vcc, K => Vcc, clk => clk_in, Q => Q_out_aux(0));\n    FF1 : BlocoFF_JK port map (J => Vcc, K => Vcc, clk => Q_out_aux(0), Q => Q_out_aux(1));\n    FF2 : BlocoFF_JK port map (J => Vcc, K => Vcc, clk => Q_out_aux(1), Q => Q_out_aux(2));\n\n    Q_out <= Q_out_aux;\n\nend Funcionamento2;\n```\n&lt;page_number&gt;18&lt;/page_number&gt;\n\n---\n\n\n## Page 19\n\n# Contador MOD 8: Encapsulamento\n\n***Dentro da arquitetura***\n\n*   **signal Vcc:** Representa o nível alto nas entradas J e K de cada FF.\n*   **signal Q_out_aux:** Variável auxiliar. Em VHDL não é permitida a atribuição de saídas (Q_out) às entradas (linha 28).\n*   **component BlocoFF_JK:** Referência à descrição VHDL no FF tipo JK (arquivo Codigo_01.vhd na pág. 06).\n    *   Repetir a declaração dos pinos (port) do arquivo Codigo_01.vhd.\n    *   Trocar a palavra entity por component.\n\n**Incluir Codigo_01.vhd no projeto:**\n\n*   Project > Add Current File to Project\n\n&lt;page_number&gt;19&lt;/page_number&gt;\n\n---\n\n\n## Page 20\n\n# Contador MOD 8: Encapsulamento\n\nFF0, FF1, FF2: Criação/instanciação de três blocos lógicos (relativos ao FF tipo JK), cada um deles com entradas J, K, clk e saída Q).\n\n&lt;img&gt;Circuit diagram showing three JK flip-flops (FF0, FF1, FF2) connected in series. Each flip-flop has power supply Vcc, clock input CLK, J and K inputs, and output Q. The outputs QOUT0, QOUT1, and QOUT2 are shown.&lt;/img&gt;\n\n“Montar” o circuito acima através do comando port map.\nMapeamento: Símbolo ‘=>’.\n\nLinha 28, (pg. 18): Usar variável auxiliar clk => Q_out_aux(0).\n\nFazer clk => Q_out(0) [???]\n\nErro. Teríamos saída (Q_out, pg.17) atribuída à entrada (clk).\n\n&lt;page_number&gt;20&lt;/page_number&gt;\n\n---\n\n\n## Page 21\n\n# Contador MOD 8: Encapsulamento\n\nAtribuir variável auxiliar (Q_out_aux) à saída verdadeira (Q_out), na linha 32 (pág. 18):\n\n```vhdl\nQ_out <= Q_out_aux;\n```\n\nSalvar arquivo Codigo_02.vhd.\n\nCriação do bloco:\n\nCom o arquivo Codigo_02.vhd ao fundo:\n\n*   File;\n*   Create/Update;\n*   Create Symbol Files for Current File.\n\n&lt;page_number&gt;21&lt;/page_number&gt;\n\n---\n\n\n## Page 22\n\n# Contador MOD 8: Encapsulamento\n\n## Criação do bloco:\n\n&lt;img&gt;Screenshot showing a software interface with a menu on the left and a code editor window on the right. The menu includes options like File, Edit, View, Project, Assignments, Processing, Tools, Window, Help, New..., Open..., Close, New Project Wizard..., Open Project..., Save Project, Close Project, Save, Save As..., Save All, File Properties..., Create / Update, Export..., Convert Programming Files..., Page Setup..., Print Preview, Print..., Recent Files, and various tool icons.&lt;/img&gt;\n\n```vhdl\n--Logica do bloco\narchitecture Funcionamento2 of BlocoContac\nsignal Vcc : std_logic := '1';\nsignal Q_out_aux : std_logic_vector(2 downto 0);\ncomponent BlocoFF_JK\n    port (J,K,clk : in std_logic;\n          Q : out std_logic);\nend component;\n```\n\n&lt;page_number&gt;22&lt;/page_number&gt;\n\n---\n\n\n## Page 23\n\n# Contador MOD 8: Encapsulamento\n\nNovo arquivo esquemático: Esquematico_03.bdf\n\n&lt;img&gt;Diagram showing a \"BlocoContador\" block with inputs \"CLOCK\", \"VCC\", \"clk_in\", and outputs \"Q_out[2..0]\" and \"Saida_Cont[2..0]\". The \"Q_out[2..0]\" output is connected to \"Saida_Cont[2..0]\".&lt;/img&gt;\n\nEntrada clk_in: CLOCK\n\nSaída Q_out [2..0]: Saida_Cont[2..0]\n\nEscolher nome da saída e acrescentar [2..0], pois Q_out é um vetor.\n\n&lt;page_number&gt;23&lt;/page_number&gt;\n\n---\n\n\n## Page 24\n\n# Contador MOD 8: Encapsulamento\n\nApós salvar o arquivo como Esquematico_03.bdf:\n\nEspecificar Esquematico_03.bdf como Top-Level Entity, antes de proceder à compilação:\n\n&lt;img&gt;Screenshot of a software interface showing a Project Navigator with files listed on the left (e.g., Codigo_1.vhd, Esquematico_1.bdf, Waveform_1.vwf, Esquematico_2.bdf, Waveform_2.vwf, Codigo_2.vhd, Esquematico_3.bdf, Waveform_3.vwf). A right-click context menu is open over \"Esquematico_3.bdf\", displaying options like Open, Remove File from Project, Set as Top-Level Entity (Ctrl+Shift+J), and Properties...&lt;/img&gt;\n\n&lt;page_number&gt;24&lt;/page_number&gt;\n\n---\n\n\n## Page 25\n\nContador MOD 8: Encapsulamento\n\nFormas de onda: Especificação dos sinais de entrada:\n\nArquivos *University Program VWF*;\n\nVerificação do funcionamento do circuito.\n\nSalvar como Waveform_03.vwf.\n\n&lt;img&gt;Waveform Diagram showing CLOCK signal and three output signals (Saida_Cont[2], Saida_Cont[1], Saida_Cont[0]) with values 000, 001, 010, 011, 100, 101, 110, 111 over time.&lt;/img&gt;\n\n&lt;page_number&gt;25&lt;/page_number&gt;",
      "metadata": {}
    }
  }
}